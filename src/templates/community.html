<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fancy goat talks</title>
  <link rel="stylesheet" href="static/design.css">
  <script>
    addEventListener("DOMContentLoaded", (event) => {
      forms = document.getElementsByTagName("form");
    for(let i = 0; i < forms.length;i++){
        forms[i].addEventListener("submit", e=>{e.preventDefault();
          let data = new FormData(forms[i]); 
          fetch('/community',{method:'POST',body:data}).then(()=>location.reload());})
    }
    });
  </script>
</head>
<body>
  <header>
    <h1> Share your recipes here !</h1>
</header>
<main>
  

  <section>
    <h2>Add a New Post</h2>
    <form method="POST">
        <textarea name="content" placeholder="Post Content" required></textarea>
        <button type="submit">Submit Post</button>
    </form>
</section>

<h2>All Posts</h2>
            {% for post in posts %}
                <div class="post">
                
                    <p>{{ post['content'] }}</p>

                    <div class="comments">
                        <h3>Comments</h3>
                        {% for comment in comments[post['id']] %}
                            <p>{{ comment['content'] }}</p>
                        {% endfor %}


                      <form method="POST">
                          <input type="hidden" name="post_id" value="{{ post['id'] }}">
                  
                          <textarea name="comment_content" placeholder="Your Comment" required></textarea>
                          <button type="submit">Submit Comment</button>
                      </form>
                  </div>
              </div>
              {% endfor %}
      </section></main>

</body>
</html>